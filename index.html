<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫°p H√≥a Sang L≈©y - ƒê·∫∑t h√†ng Online</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <meta name="google-site-verification" content="VjNwQ35l995_3CANT5rWev8yYeE4jaLvjZS1gbJkiIU" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Be Vietnam Pro"', 'sans-serif'] },
                    colors: {
                        brand: { red: '#e11d48', orange: '#f97316', yellow: '#fbbf24', green: '#16a34a', fb: '#0866FF' }
                    }
                }
            }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        /* ·∫®n hi·ªán c√°c view */
        .view-section { display: none; animation: fadeIn 0.3s ease-in-out; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Badge gi·ªè h√†ng n·∫£y l√™n */
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } }
        .animate-pop { animation: pop 0.3s ease-in-out; }

        /* N√∫t FB Chat */
        .fb-chat-btn { position: fixed; bottom: 20px; right: 20px; z-index: 50; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans antialiased pb-20 md:pb-0">

    <!-- Header / Navbar -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20">
                <!-- Logo -->
                <div class="flex items-center gap-2 cursor-pointer" onclick="app.navigate('home')">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-brand-red rounded-full flex items-center justify-center text-white shadow-sm">
                        <i class="fa-solid fa-store text-xl sm:text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="font-extrabold text-xl sm:text-2xl text-brand-red tracking-tight leading-none">SANG L≈®Y</h1>
                        <p class="text-[10px] sm:text-xs text-gray-500 font-semibold uppercase tracking-wider">T·∫°p H√≥a & Ti·ªán L·ª£i</p>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="javascript:void(0)" onclick="app.navigate('home')" class="text-gray-600 hover:text-brand-red font-medium transition">Trang ch·ªß</a>
                    <a href="javascript:void(0)" onclick="app.navigate('home'); setTimeout(()=>document.getElementById('gioi-thieu').scrollIntoView(), 100);" class="text-gray-600 hover:text-brand-red font-medium transition">Gi·ªõi thi·ªáu</a>
                    <a href="javascript:void(0)" onclick="app.navigate('home'); setTimeout(()=>document.getElementById('mat-hang').scrollIntoView(), 100);" class="text-gray-600 hover:text-brand-red font-medium transition">S·∫£n ph·∫©m</a>
                    
                    <!-- Gi·ªè h√†ng -->
                    <div class="relative cursor-pointer group" onclick="app.navigate('cart')">
                        <div class="bg-rose-50 text-brand-red px-4 py-2 rounded-full group-hover:bg-brand-red group-hover:text-white transition flex items-center gap-2 font-bold">
                            <i class="fa-solid fa-cart-shopping text-lg"></i> Gi·ªè h√†ng
                        </div>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-white shadow-sm">0</span>
                    </div>
                </div>

                <!-- Mobile Cart -->
                <div class="md:hidden flex items-center gap-4">
                    <div class="relative cursor-pointer bg-rose-50 p-2.5 rounded-full text-brand-red" onclick="app.navigate('cart')">
                        <i class="fa-solid fa-cart-shopping text-xl"></i>
                        <span id="mobile-cart-count" class="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold w-4 h-4 flex items-center justify-center rounded-full">0</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ==================== VIEW 1: TRANG CH·ª¶ (HOME) ==================== -->
    <div id="view-home" class="view-section active">
        <!-- Hero Banner -->
        <section class="relative bg-brand-red pt-10 pb-20 lg:pt-16 lg:pb-28 overflow-hidden">
            <!-- Background Pattern -->
            <div class="absolute inset-0 opacity-10">
                <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
                    <defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="2" cy="2" r="2" fill="currentColor"/></pattern></defs>
                    <rect width="100%" height="100%" fill="url(#dots)" />
                </svg>
            </div>

            <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-10">
                <div class="w-full md:w-1/2 text-center md:text-left text-white">
                    <span class="inline-block py-1 px-3 rounded-full bg-white/20 text-white text-sm font-semibold mb-4 backdrop-blur-sm border border-white/30">
                        M·ªü c·ª≠a t·ª´ 06:00 - 22:00
                    </span>
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 leading-tight">
                        T·∫°p H√≥a Sang L≈©y <br />
                        <span class="text-brand-yellow">C·∫ßn g√¨ c≈©ng c√≥!</span>
                    </h2>
                    <p class="text-lg md:text-xl text-rose-100 mb-8 max-w-lg mx-auto md:mx-0">Ph·ª•c v·ª• b√† con l·ªëi x√≥m v·ªõi ƒëa d·∫°ng m·∫∑t h√†ng thi·∫øt y·∫øu, gi√° c·∫£ b√¨nh d√¢n. ƒê·∫∑t h√†ng online, ch·ªët ƒë∆°n qua Zalo/FB, nh·∫≠n h√†ng trong 30 ph√∫t!</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                        <button onclick="document.getElementById('mat-hang').scrollIntoView()" class="bg-brand-yellow text-red-900 px-8 py-3.5 rounded-full font-bold text-lg hover:bg-yellow-400 transition shadow-lg flex items-center justify-center gap-2">
                            Mua S·∫Øm Ngay <i class="fa-solid fa-arrow-down"></i>
                        </button>
                    </div>
                </div>
                <div class="w-full md:w-1/2">
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="H√†ng h√≥a" class="rounded-2xl shadow-2xl border-4 border-white transform md:rotate-2 hover:rotate-0 transition duration-300 w-full object-cover h-[250px] md:h-[400px]">
                </div>
            </div>

            <!-- Curvy bottom -->
            <div class="absolute bottom-0 w-full overflow-hidden leading-none rotate-180">
                <svg class="relative block w-full h-[50px] md:h-[80px]" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                    <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="fill-gray-50"></path>
                </svg>
            </div>
        </section>

        <!-- Video Gi·ªõi Thi·ªáu & ƒêi·ªÉm m·∫°nh -->
        <section id="gioi-thieu" class="py-12 bg-gray-50 relative z-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-4">V·ªÅ T·∫°p H√≥a Sang L≈©y</h2>
                    <div class="w-20 h-1.5 bg-brand-red mx-auto rounded-full mb-8"></div>
                </div>

                <div class="flex flex-col lg:flex-row gap-8 items-center">
                    <!-- Khu v·ª±c Video YouTube -->
                    <div class="w-full lg:w-1/2">
                        <!-- T·ª∑ l·ªá 16:9 cho video -->
                        <div class="relative w-full overflow-hidden rounded-2xl shadow-lg border-4 border-white bg-gray-200" style="padding-top: 56.25%;">
                            <!-- B·∫°n thay link embed YouTube c·ªßa b·∫°n v√†o th·∫ª src b√™n d∆∞·ªõi -->
                            <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/Pj15X7qJ0_M?si=pXvI2v09y_fQyq4M" title="Gi·ªõi thi·ªáu c·ª≠a h√†ng" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>

                    <!-- Khu v·ª±c Text & Feature -->
                    <div class="w-full lg:w-1/2 flex flex-col gap-6">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start gap-4">
                            <div class="w-12 h-12 bg-red-100 text-brand-red rounded-full flex items-center justify-center flex-shrink-0 text-xl">
                                <i class="fa-solid fa-boxes-stacked"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">H√†ng Ng√†n M·∫∑t H√†ng</h3>
                                <p class="text-gray-600 text-sm">Ch·ªâ ƒëƒÉng v√†i m√≥n ƒë·∫°i di·ªán, nh∆∞ng ti·ªám c√≥ ƒë·ªß m·ªçi th·ª© t·ª´ A-Z. C·ª© nh·∫Øn tin l√† ti·ªám l·∫•y ƒë·ªß cho b·∫°n!</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start gap-4">
                            <div class="w-12 h-12 bg-green-100 text-brand-green rounded-full flex items-center justify-center flex-shrink-0 text-xl">
                                <i class="fa-solid fa-motorcycle"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Giao H√†ng T·∫≠n N∆°i</h3>
                                <p class="text-gray-600 text-sm">Ch·ªâ c·∫ßn ƒë·∫∑t h√†ng tr√™n web, g·ªçi ƒëi·ªán ho·∫∑c nh·∫Øn Zalo. C·ª≠a h√†ng s·∫Ω so·∫°n s·∫µn v√† giao t·∫≠n nh√† cho b√† con th·∫≠t nhanh ch√≥ng.</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start gap-4">
                            <div class="w-12 h-12 bg-yellow-100 text-brand-orange rounded-full flex items-center justify-center flex-shrink-0 text-xl">
                                <i class="fa-solid fa-hand-holding-dollar"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Gi√° C·∫£ B√¨nh D√¢n</h3>
                                <p class="text-gray-600 text-sm">Cam k·∫øt b√°n ƒë√∫ng gi√°, gi√° b√¨nh d√¢n nh∆∞ ·ªü ch·ª£. C√¢n ƒë√∫ng, b√°n ƒë·ªß, uy t√≠n l√†m n√™n th∆∞∆°ng hi·ªáu l√¢u nƒÉm.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product Grid v·ªõi Ph√¢n lo·∫°i Danh m·ª•c -->
        <section id="mat-hang" class="py-12 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-2">S·∫£n Ph·∫©m ƒê·∫°i Di·ªán</h2>
                    <div class="w-16 h-1.5 bg-brand-red mx-auto rounded-full mb-6"></div>
                    
                    <!-- THANH T√åM KI·∫æM S·∫¢N PH·∫®M -->
                    <div class="max-w-xl mx-auto relative mb-8">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <i class="fa-solid fa-magnifying-glass text-gray-400"></i>
                        </div>
                        <input type="text" id="search-input" onkeyup="app.searchProduct(this.value)" placeholder="T√¨m m√≥n b·∫°n c·∫ßn (VD: G·∫°o, M·∫Øm, Bia...)" class="w-full pl-12 pr-4 py-3 rounded-full border border-gray-300 focus:outline-none focus:border-brand-red focus:ring-1 focus:ring-brand-red shadow-sm transition text-gray-700">
                    </div>
                </div>

                <!-- Thanh Ph√¢n Lo·∫°i (Tabs) -->
                <div class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-10" id="category-filters">
                    <!-- Ch√®n b·∫±ng JS -->
                </div>

                <!-- Container ch·ª©a s·∫£n ph·∫©m (Render b·∫±ng JS) -->
                <div id="product-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
                    <!-- Products will be injected here -->
                </div>
            </div>
        </section>
    </div>

    <!-- ==================== VIEW 2: CHI TI·∫æT S·∫¢N PH·∫®M ==================== -->
    <div id="view-detail" class="view-section bg-white min-h-screen py-8">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <button onclick="app.navigate('home')" class="text-gray-500 hover:text-brand-red font-medium mb-6 flex items-center transition">
                <i class="fa-solid fa-arrow-left mr-2"></i> Quay l·∫°i c·ª≠a h√†ng
            </button>
            
            <div id="detail-content" class="flex flex-col md:flex-row gap-8 lg:gap-12">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <!-- ==================== VIEW 3: GI·ªé H√ÄNG & THANH TO√ÅN ==================== -->
    <div id="view-cart" class="view-section bg-gray-50 min-h-screen py-8">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <i class="fa-solid fa-cart-shopping text-brand-red mr-3"></i> Gi·ªè H√†ng C·ªßa B·∫°n
            </h2>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Danh s√°ch m√≥n h√†ng -->
                <div class="lg:w-2/3 bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                    <div id="cart-items" class="space-y-4">
                        <!-- Cart items injected by JS -->
                    </div>
                </div>

                <!-- Form th√¥ng tin & Ch·ªët ƒë∆°n FB -->
                <div class="lg:w-1/3">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 sticky top-24">
                        <h3 class="font-bold text-lg mb-4 border-b pb-2">Th√¥ng tin nh·∫≠n h√†ng</h3>
                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">T√™n c·ªßa b·∫°n *</label>
                                <input type="text" id="customer-name" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-brand-red" placeholder="VD: C√¥ NƒÉm">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">S·ªë ƒëi·ªán tho·∫°i *</label>
                                <input type="tel" id="customer-phone" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-brand-red" placeholder="090...">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">ƒê·ªãa ch·ªâ giao h√†ng & L·ªùi nh·∫Øn *</label>
                                <textarea id="customer-address" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-brand-red" placeholder="S·ªë nh√†... L·∫•y th√™m cho c√¥ 2 b√≥ rau mu·ªëng nh√©!"></textarea>
                            </div>
                        </div>

                        <div class="border-t pt-4 mb-6">
                            <div class="flex justify-between font-bold text-lg">
                                <span>T·ªïng ti·ªÅn:</span>
                                <span id="cart-total-price" class="text-brand-red">0ƒë</span>
                            </div>
                        </div>

                        <!-- Buttons Ch·ªët ƒê∆°n qua M·∫°ng X√£ H·ªôi -->
                        <div class="space-y-3">
                            <button onclick="app.checkout('facebook')" class="w-full bg-brand-fb text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition shadow-md">
                                <i class="fa-brands fa-facebook-messenger text-xl"></i> G·ª≠i ƒë∆°n qua Messenger
                            </button>
                            <button onclick="app.checkout('zalo')" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-600 transition shadow-md">
                                <i class="fa-solid fa-comment-dots text-xl"></i> G·ª≠i ƒë∆°n qua Zalo
                            </button>
                            <p class="text-[11px] text-gray-500 text-center mt-2">ƒê∆°n h√†ng s·∫Ω ƒë∆∞·ª£c chuy·ªÉn th√†nh tin nh·∫Øn g·ª≠i tr·ª±c ti·∫øp cho ch·ªß ti·ªám.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white pt-16 pb-8 border-t-4 border-brand-red mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-6">
                        <div class="w-10 h-10 bg-brand-red rounded-full flex items-center justify-center text-white"><i class="fa-solid fa-store text-xl"></i></div>
                        <h2 class="font-extrabold text-2xl tracking-tight text-white">SANG L≈®Y</h2>
                    </div>
                    <p class="text-gray-400 mb-6 leading-relaxed">T·∫°p h√≥a Sang L≈©y - N∆°i mua s·∫Øm th√¢n thu·ªôc, ti·ªán l·ª£i v√† uy t√≠n c·ªßa b√† con khu v·ª±c.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6 text-brand-yellow">Th√¥ng Tin Li√™n H·ªá</h3>
                    <ul class="space-y-4 text-gray-300">
                        <li class="flex items-start"><i class="fa-solid fa-location-dot mt-1 mr-3 text-brand-red text-lg w-5 text-center"></i> <span>Nh√† s·ªë 3, ƒë∆∞·ªùng 43, t·ªï 4, th√¥n 4</span></li>
                        <li class="flex items-center"><i class="fa-solid fa-phone mr-3 text-brand-red text-lg w-5 text-center"></i> <a href="tel:0398139664" class="hover:text-white font-bold">0398.139.664 (C√¥ L≈©y)</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6 text-brand-yellow">M·ªü C·ª≠a</h3>
                    <p class="text-gray-300 mb-2"><i class="fa-solid fa-clock mr-2 text-brand-red"></i> Th·ª© 2 - Ch·ªß Nh·∫≠t</p>
                    <p class="text-gray-300 text-lg font-bold">08:00 S√°ng - 22:00 T·ªëi</p>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-sm text-gray-500">
                <p>&copy; 2026 T·∫°p H√≥a Sang L≈©y. Ph·ª•c v·ª• b·∫±ng s·ª± t·∫≠n t√¢m.</p>
            </div>
        </div>
    </footer>

    <!-- Toast Th√¥ng b√°o -->
    <div id="toast" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-xl z-50 transition-all duration-300 opacity-0 translate-y-10 pointer-events-none flex items-center gap-2">
        <i class="fa-solid fa-circle-check text-green-400"></i> <span id="toast-msg">Th√™m th√†nh c√¥ng</span>
    </div>

    <!-- C·∫§U TR√öC JAVASCRIPT (ƒê√ìNG VAI TR√í NH∆Ø REACT/VUE) -->
    <script>
        // 1. DATABASE (D·ªØ li·ªáu s·∫£n ph·∫©m gi·∫£ l·∫≠p)
        const dbProducts = [
            { id: 1, name: 'G·∫°o ST25 L√∫a T√¥m (Bao 5kg)', price: 185000, img: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'G·∫°o d·∫ªo, th∆°m l·ª´ng. Ch√≠nh h√£ng ch√∫ H·ªì Quang Cua.', category: 'L∆∞∆°ng th·ª±c' },
            { id: 2, name: 'Th√πng M√¨ H·∫£o H·∫£o Chua Cay', price: 115000, img: 'https://images.unsplash.com/photo-1598514982205-f36b96d1e8d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'Th√πng 30 g√≥i, m√¨ qu·ªëc d√¢n. H√†ng date m·ªõi li√™n t·ª•c.', category: 'ƒê·ªì ƒÉn nhanh' },
            { id: 3, name: 'D·∫ßu ƒÇn T∆∞·ªùng An 1 L√≠t', price: 48000, img: 'https://images.unsplash.com/photo-1628190986701-d8ec1bdf4e56?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'D·∫ßu th·ª±c v·∫≠t an to√†n cho s·ª©c kh·ªèe gia ƒë√¨nh.', category: 'Gia v·ªã' },
            { id: 4, name: 'N∆∞·ªõc M·∫Øm Nam Ng∆∞ ƒê·ªá Nh·ªã', price: 32000, img: 'https://images.unsplash.com/photo-1596639739561-1c390a786016?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'Chai l·ªõn 900ml, ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã truy·ªÅn th·ªëng.', category: 'Gia v·ªã' },
            { id: 5, name: 'Th√πng Bia Tiger B·∫°c', price: 380000, img: 'https://images.unsplash.com/photo-1600217032731-15b63d917f8a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'Bia Tiger Crystal ∆∞·ªõp l·∫°nh s·∫µn, th√πng 24 lon.', category: 'ƒê·ªì u·ªëng' },
            { id: 6, name: 'N∆∞·ªõc Gi·∫∑t OMO Matic (T√∫i 3.1kg)', price: 165000, img: 'https://images.unsplash.com/photo-1584824486516-0555a07fc511?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'D√πng cho m√°y gi·∫∑t c·ª≠a tr√™n, kh·ª≠ m√πi h√¥i hi·ªáu qu·∫£.', category: 'H√≥a ph·∫©m' },
            { id: 7, name: 'S·ªØa T∆∞∆°i Vinamilk 100% (L·ªëc 4 h·ªôp)', price: 32000, img: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'S·ªØa t∆∞∆°i nguy√™n ch·∫•t, b·ªï sung dinh d∆∞·ª°ng.', category: 'ƒê·ªì u·ªëng' },
            { id: 8, name: 'N∆∞·ªõc M·∫Øm Barona (Chai 500ml)', price: 25000, img: 'https://images.unsplash.com/photo-1614088825827-0b19cf629bb6?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80', desc: 'N∆∞·ªõc m·∫Øm c√° c∆°m nguy√™n ch·∫•t Barona.', category: 'Gia v·ªã' }
        ];

        // 2. STATE MANAGEMENT (Qu·∫£n l√Ω tr·∫°ng th√°i App)
        const app = {
            cart: [],
            currentView: 'home',
            activeCategory: 'T·∫•t c·∫£',
            searchKeyword: '', // Th√™m tr·∫°ng th√°i t√¨m ki·∫øm
            
            // H√†m chuy·ªÉn trang
            navigate: function(viewId, param = null) {
                // ·∫®n t·∫•t c·∫£ views
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                // Hi·ªán view ƒë∆∞·ª£c ch·ªçn
                document.getElementById('view-' + viewId).classList.add('active');
                window.scrollTo(0,0);

                if(viewId === 'home') {
                    this.renderCategories();
                    this.renderHome();
                }
                if(viewId === 'detail' && param) this.renderDetail(param);
                if(viewId === 'cart') this.renderCart();
            },

            // Format ti·ªÅn t·ªá VNƒê
            formatPrice: (price) => new Intl.NumberFormat('vi-VN').format(price) + 'ƒë',

            // Hi·ªÉn th·ªã th√¥ng b√°o (Toast)
            showToast: function(msg) {
                const toast = document.getElementById('toast');
                document.getElementById('toast-msg').innerText = msg;
                toast.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
                setTimeout(() => toast.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none'), 2500);
            },

            // RENDER: B·ªô l·ªçc Danh m·ª•c
            renderCategories: function() {
                // L·∫•y ra c√°c danh m·ª•c duy nh·∫•t t·ª´ db
                const categories = ['T·∫•t c·∫£', ...new Set(dbProducts.map(p => p.category))];
                const container = document.getElementById('category-filters');
                container.innerHTML = categories.map(cat => `
                    <button onclick="app.filterCategory('${cat}')" class="px-5 py-2 rounded-full text-sm font-semibold transition border ${this.activeCategory === cat ? 'bg-brand-red text-white border-brand-red shadow-md' : 'bg-white text-gray-600 border-gray-200 hover:border-brand-red hover:text-brand-red'}">
                        ${cat}
                    </button>
                `).join('');
            },

            // X·ª≠ l√Ω khi click v√†o n√∫t Danh m·ª•c
            filterCategory: function(cat) {
                this.activeCategory = cat;
                this.renderCategories();
                this.renderHome();
            },

            // X·ª≠ l√Ω t√¨m ki·∫øm
            searchProduct: function(keyword) {
                this.searchKeyword = keyword.toLowerCase().trim();
                this.renderHome();
            },

            // RENDER: Trang Ch·ªß (Danh s√°ch s·∫£n ph·∫©m)
            renderHome: function() {
                const grid = document.getElementById('product-grid');
                
                // L·ªçc s·∫£n ph·∫©m theo Category V√Ä theo Search Keyword
                let filteredProducts = dbProducts;
                
                if (this.activeCategory !== 'T·∫•t c·∫£') {
                    filteredProducts = filteredProducts.filter(p => p.category === this.activeCategory);
                }
                
                if (this.searchKeyword !== '') {
                    filteredProducts = filteredProducts.filter(p => 
                        p.name.toLowerCase().includes(this.searchKeyword) || 
                        p.category.toLowerCase().includes(this.searchKeyword)
                    );
                }

                if (filteredProducts.length === 0) {
                    grid.innerHTML = `<div class="col-span-full text-center py-10 text-gray-500">Kh√¥ng t√¨m th·∫•y m√≥n b·∫°n c·∫ßn? ƒê·ª´ng lo, nh·∫Øn tin ngay ƒë·ªÉ ti·ªám l·∫•y cho b·∫°n nh√©!</div>`;
                } else {
                    grid.innerHTML = filteredProducts.map(p => `
                        <div class="bg-white rounded-xl shadow-sm hover:shadow-md transition border border-gray-100 flex flex-col h-full cursor-pointer" onclick="app.navigate('detail', ${p.id})">
                            <div class="relative aspect-square overflow-hidden rounded-t-xl bg-gray-100">
                                <img src="${p.img}" alt="${p.name}" class="w-full h-full object-cover hover:scale-105 transition duration-300">
                            </div>
                            <div class="p-3 md:p-4 flex flex-col flex-grow">
                                <p class="text-[10px] text-gray-500 mb-1 uppercase">${p.category}</p>
                                <h3 class="font-bold text-gray-800 text-sm md:text-base mb-2 line-clamp-2">${p.name}</h3>
                                <div class="mt-auto flex justify-between items-center">
                                    <span class="text-brand-red font-bold text-lg">${this.formatPrice(p.price)}</span>
                                    <button onclick="event.stopPropagation(); app.addToCart(${p.id})" class="bg-rose-100 text-brand-red w-8 h-8 rounded-full flex items-center justify-center hover:bg-brand-red hover:text-white transition">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                // TH√äM TH·∫∫ CALL TO ACTION ·ªû CU·ªêI DANH S√ÅCH (D√π c√≥ l·ªçc hay kh√¥ng)
                grid.innerHTML += `
                    <div class="bg-rose-50 rounded-xl shadow-sm transition border-2 border-dashed border-rose-300 flex flex-col items-center justify-center h-full p-4 text-center cursor-pointer hover:bg-rose-100" onclick="window.open('https://zalo.me/0901234567', '_blank')">
                        <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-brand-red text-xl mb-3 shadow-sm">
                            <i class="fa-solid fa-box-open"></i>
                        </div>
                        <h3 class="font-bold text-brand-red text-sm md:text-base mb-2">M√≥n kh√°c?</h3>
                        <p class="text-xs text-gray-600 mb-4">Ti·ªám c√≤n h√†ng ng√†n m√≥n kh√°c ch∆∞a ƒëƒÉng l√™n web. Nh·∫•n ƒë·ªÉ nh·∫Øn Zalo l·∫•y th√™m!</p>
                        <span class="bg-brand-red text-white text-xs font-bold px-4 py-2 rounded-full">Nh·∫Øn ti·ªám ngay</span>
                    </div>
                `;
            },

            // RENDER: Trang Chi ti·∫øt S·∫£n ph·∫©m
            renderDetail: function(productId) {
                const p = dbProducts.find(item => item.id === productId);
                if(!p) return;
                
                // N√∫t chia s·∫ª Facebook chu·∫©n
                const currentUrl = encodeURIComponent(window.location.href);
                const fbShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${currentUrl}`;

                const container = document.getElementById('detail-content');
                container.innerHTML = `
                    <div class="w-full md:w-1/2">
                        <img src="${p.img}" alt="${p.name}" class="w-full rounded-2xl shadow-sm object-cover aspect-square">
                    </div>
                    <div class="w-full md:w-1/2 flex flex-col">
                        <span class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full w-max mb-3">${p.category}</span>
                        <h1 class="text-2xl md:text-3xl font-extrabold text-gray-900 mb-3">${p.name}</h1>
                        <p class="text-3xl font-bold text-brand-red mb-6">${this.formatPrice(p.price)}</p>
                        <div class="prose text-gray-600 mb-8 border-t border-b py-4">
                            <p>${p.desc}</p>
                            <ul class="list-disc pl-5 mt-2 text-sm">
                                <li>Cam k·∫øt h√†ng ch√≠nh h√£ng, date m·ªõi.</li>
                                <li>Giao h√†ng t·∫≠n n∆°i trong khu v·ª±c.</li>
                            </ul>
                        </div>
                        
                        <div class="flex gap-4 mb-6">
                            <button onclick="app.addToCart(${p.id}, true)" class="flex-1 bg-brand-red text-white py-4 rounded-xl font-bold text-lg hover:bg-rose-700 transition shadow-lg flex justify-center items-center gap-2">
                                <i class="fa-solid fa-cart-plus"></i> Th√™m v√†o gi·ªè
                            </button>
                        </div>
                        
                        <div class="mt-auto">
                            <p class="text-sm font-medium text-gray-500 mb-2">Chia s·∫ª cho ng∆∞·ªùi th√¢n:</p>
                            <a href="${fbShareUrl}" target="_blank" class="inline-flex items-center gap-2 bg-gray-100 hover:bg-brand-fb hover:text-white text-gray-700 px-4 py-2 rounded-lg transition font-medium text-sm">
                                <i class="fa-brands fa-facebook"></i> Chia s·∫ª Facebook
                            </a>
                        </div>
                    </div>
                `;
            },

            // LOGIC: Th√™m v√†o gi·ªè
            addToCart: function(productId, goCart = false) {
                const product = dbProducts.find(p => p.id === productId);
                const existingItem = this.cart.find(item => item.id === productId);
                
                if(existingItem) {
                    existingItem.qty += 1;
                } else {
                    this.cart.push({ ...product, qty: 1 });
                }
                
                this.updateCartUI();
                if(goCart) this.navigate('cart');
                else this.showToast('ƒê√£ th√™m ' + product.name);
            },

            // LOGIC: Thay ƒë·ªïi s·ªë l∆∞·ª£ng
            changeQty: function(index, delta) {
                this.cart[index].qty += delta;
                if(this.cart[index].qty <= 0) this.cart.splice(index, 1);
                this.updateCartUI();
                this.renderCart();
            },

            // C·∫≠p nh·∫≠t Badge s·ªë l∆∞·ª£ng Gi·ªè h√†ng
            updateCartUI: function() {
                const totalItems = this.cart.reduce((sum, item) => sum + item.qty, 0);
                document.getElementById('cart-count').innerText = totalItems;
                document.getElementById('mobile-cart-count').innerText = totalItems;
                
                // Hi·ªáu ·ª©ng n·∫£y
                const badges = [document.getElementById('cart-count'), document.getElementById('mobile-cart-count')];
                badges.forEach(b => {
                    b.classList.remove('animate-pop');
                    void b.offsetWidth; // trigger reflow
                    b.classList.add('animate-pop');
                });
            },

            // RENDER: Trang Gi·ªè h√†ng
            renderCart: function() {
                const container = document.getElementById('cart-items');
                if(this.cart.length === 0) {
                    container.innerHTML = `<div class="text-center py-10"><i class="fa-solid fa-basket-shopping text-4xl text-gray-300 mb-3"></i><p class="text-gray-500">Gi·ªè h√†ng tr·ªëng</p><button onclick="app.navigate('home')" class="mt-4 text-brand-red font-bold">Ti·∫øp t·ª•c mua s·∫Øm</button></div>`;
                    document.getElementById('cart-total-price').innerText = '0ƒë';
                    return;
                }

                let total = 0;
                container.innerHTML = this.cart.map((item, index) => {
                    total += item.price * item.qty;
                    return `
                    <div class="flex items-center gap-4 py-3 border-b last:border-0">
                        <img src="${item.img}" class="w-16 h-16 object-cover rounded-lg border">
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 text-sm line-clamp-1">${item.name}</h4>
                            <div class="text-brand-red font-semibold text-sm">${this.formatPrice(item.price)}</div>
                        </div>
                        <div class="flex items-center bg-gray-100 rounded-lg border">
                            <button onclick="app.changeQty(${index}, -1)" class="w-8 h-8 flex items-center justify-center text-gray-600 hover:text-brand-red">-</button>
                            <span class="w-6 text-center text-sm font-bold">${item.qty}</span>
                            <button onclick="app.changeQty(${index}, 1)" class="w-8 h-8 flex items-center justify-center text-gray-600 hover:text-brand-red">+</button>
                        </div>
                    </div>
                `}).join('');
                document.getElementById('cart-total-price').innerText = this.formatPrice(total);
            },

            // LOGIC: CH·ªêT ƒê∆†N & G·ª¨I QUA FACEBOOK / ZALO (ƒê√É FIX L·ªñI CLIPBOARD)
            checkout: function(platform) {
                if(this.cart.length === 0) return alert('Gi·ªè h√†ng tr·ªëng!');
                
                const name = document.getElementById('customer-name').value;
                const phone = document.getElementById('customer-phone').value;
                const address = document.getElementById('customer-address').value;

                if(!name || !phone || !address) return alert('Vui l√≤ng ƒëi·ªÅn ƒë·ªß T√™n, SƒêT v√† ƒê·ªãa ch·ªâ!');

                let total = 0;
                let orderText = `üõí ƒê∆†N H√ÄNG M·ªöI T·ª™ WEBSITE\n`;
                orderText += `--------------------------\n`;
                orderText += `üë§ T√™n: ${name}\n`;
                orderText += `üìû SƒêT: ${phone}\n`;
                orderText += `üìç ƒê·ªãa ch·ªâ & L·ªùi nh·∫Øn: ${address}\n`;
                orderText += `--------------------------\n`;
                this.cart.forEach((item, i) => {
                    orderText += `${i+1}. ${item.name} (x${item.qty})\n`;
                    total += item.price * item.qty;
                });
                orderText += `--------------------------\n`;
                orderText += `üí∞ T·ªîNG C·ªòNG: ${this.formatPrice(total)}`;

                const encodedText = encodeURIComponent(orderText);

                if(platform === 'facebook') {
                    // FIX: D√πng Clipboard copy n·ªôi dung ƒë∆°n h√†ng ƒë·ªÉ kh√°ch d√°n v√†o Messenger
                    navigator.clipboard.writeText(orderText).then(() => {
                        alert("ƒê√£ copy ƒë∆°n h√†ng! Tr√¨nh duy·ªát s·∫Ω m·ªü Facebook Messenger, b·∫°n vui l√≤ng nh·∫•n D√ÅN (Paste) v√†o khung chat ƒë·ªÉ g·ª≠i ƒë∆°n cho Ti·ªám nh√©.");
                        // Thay 'your_fanpage_id_here' b·∫±ng Username c·ªßa Fanpage
                        const fbUrl = `https://m.me/your_fanpage_id_here`;
                        window.open(fbUrl, '_blank');
                        
                        this.cart = [];
                        this.updateCartUI();
                        this.navigate('home');
                    }).catch(err => {
                        alert("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ copy t·ª± ƒë·ªông. Vui l√≤ng ch·ªçn g·ª≠i qua Zalo nh√©!");
                    });
                } else if (platform === 'zalo') {
                    // Zalo h·ªó tr·ª£ truy·ªÅn text tr·ª±c ti·∫øp
                    const zaloUrl = `https://zalo.me/0901234567?text=${encodedText}`;
                    window.open(zaloUrl, '_blank');
                    
                    this.cart = [];
                    this.updateCartUI();
                    this.navigate('home');
                }
            }
        };

        // Kh·ªüi t·∫°o App
        window.onload = () => {
            app.navigate('home');
        };
    </script>
</body>
</html>